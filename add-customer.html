<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add Customer Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h2>Add Customer (Final Test)</h2>

<input id="customerName" placeholder="Name"><br><br>
<input id="customerPhone" placeholder="Phone"><br><br>
<input id="customerBalance" placeholder="Balance"><br><br>

<button id="saveCustomerBtn">Save Customer</button>

<p id="status"></p>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const status = document.getElementById("status");

  status.innerText = "Script loaded ✅";

  const firebaseConfig = {
    apiKey: "AIzaSyDFcVgtofCuu3uQpMiofAPm3JQ0xiaeJVQ",
    authDomain: "mutoiba-textiles.firebaseapp.com",
    projectId: "mutoiba-textiles",
    storageBucket: "mutoiba-textiles.appspot.com",
    messagingSenderId: "544691020034",
    appId: "1:544691020034:web:82ee6c0f8e94256fbce21b"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  document.getElementById("saveCustomerBtn").onclick = async () => {
    status.innerText = "Button clicked ✅";

    try {
      await addDoc(collection(db, "customers"), {
        name: customerName.value,
        phone: customerPhone.value,
        balance: Number(customerBalance.value || 0),
        createdAt: new Date()
      });

      status.innerText = "Customer SAVED successfully ✅";

    } catch (e) {
      console.error(e);
      status.innerText = "ERROR: " + e.message;
    }
  };
</script>

</body>
</html>
