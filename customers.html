<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/style.css">
    <title>Customer Directory</title>
</head>
<body>
    <nav class="nav-bar">
        <strong>Mutoiba Textiles</strong>
        <a href="dashboard.html" style="color: white;">‚Üê Back</a>
    </nav>

    <div style="padding: 2rem;">
        <h2>Customer Directory</h2>
        <input type="text" id="searchInput" placeholder="Search by name or phone..." style="margin-bottom: 20px;">
        
        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden;">
            <thead style="background: var(--primary); color: white;">
                <tr>
                    <th style="padding: 15px; text-align: left;">Name</th>
                    <th style="padding: 15px; text-align: left;">Phone</th>
                    <th style="padding: 15px; text-align: left;">Action</th>
                </tr>
            </thead>
            <tbody id="customer-list">
                </tbody>
        </table>
    </div>

    <script type="module">
        import { db } from './js/firebase.js';
        import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const list = document.getElementById('customer-list');
        const querySnapshot = await getDocs(collection(db, "customers"));
        
        querySnapshot.forEach((doc) => {
            const data = doc.data();
            list.innerHTML += `
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 15px;">${data.name}</td>
                    <td style="padding: 15px;">${data.phone}</td>
                    <td style="padding: 15px;">
                        <a href="ledger.html?id=${doc.id}" style="color: var(--primary); font-weight: bold;">View Ledger</a>
                    </td>
                </tr>
            `;
        });
    </script>
</body>
</html>

